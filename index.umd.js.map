{"version":3,"file":"index.umd.js","sources":["src/index.js"],"sourcesContent":["import { createElement, Component, Children } from 'react'\n\nconst CONTEXT_TYPES = {\n  store: () => {}\n}\n\nexport class Provider extends Component {\n  getChildContext() {\n    return { store: this.props.store }\n  }\n\n  render() {\n    return Children.only(this.props.children)\n  }\n}\n\nProvider.childContextTypes = CONTEXT_TYPES\n\nexport const connect = (...args) => {\n  const Comp = args.slice(-1)[0]\n  const strings = args.length > 1 ? args.slice(0, -1) : []\n  const actionCreators = []\n  const keysToWatch = []\n  strings.forEach(str => {\n    if (str.slice(0, 6) === 'select') {\n      keysToWatch.push(str)\n      return\n    }\n    if (str.slice(0, 2) === 'do') {\n      actionCreators.push(str)\n      return\n    }\n    throw Error(`CanNotConnect ${str}`)\n  })\n\n  class Connect extends Component {\n    constructor(props, context) {\n      super(props, context)\n      const store = context.store\n      this.state = store.select(keysToWatch)\n      this.unsubscribe = store.subscribeToSelectors(\n        keysToWatch,\n        this.setState.bind(this)\n      )\n      this.actionCreators = {}\n      actionCreators.forEach(name => {\n        this.actionCreators[name] = (...args) => {\n          if (store.action) {\n            return store.action(name, args)\n          }\n          return store[name](...args)\n        }\n      })\n    }\n\n    componentWillUnmount() {\n      this.unsubscribe()\n    }\n\n    render() {\n      return createElement(\n        Comp,\n        Object.assign({}, this.props, this.state, this.actionCreators)\n      )\n    }\n  }\n  Connect.contextTypes = CONTEXT_TYPES\n  Connect.displayName = Component.displayName || Component.name\n  return Connect\n}\n"],"names":["const","CONTEXT_TYPES","store","Provider","getChildContext","this","props","render","Children","only","children","Component","childContextTypes","Comp","args","slice","actionCreators","keysToWatch","length","forEach","str","Error","push","Connect","context","super","state","select","unsubscribe","subscribeToSelectors","setState","bind","name","action","componentWillUnmount","createElement","Object","assign","contextTypes","displayName"],"mappings":"0NAEAA,IAAMC,GACJC,oBAGWC,mJACXC,2BACE,OAASF,MAAOG,KAAKC,MAAMJ,oBAG7BK,kBACE,OAAOC,WAASC,KAAKJ,KAAKC,MAAMI,cANNC,aAU9BR,EAASS,kBAAoBX,2FAG3BD,IAAMa,EAAOC,EAAKC,OAAO,GAAG,GAEtBC,KACAC,MAFUH,EAAKI,OAAS,EAAIJ,EAAKC,MAAM,GAAI,OAGzCI,iBAAQC,GACd,GAAwB,WAApBA,EAAIL,MAAM,EAAG,GAAjB,CAIA,GAAwB,OAApBK,EAAIL,MAAM,EAAG,GAIjB,MAAMM,uBAAuBD,GAH3BJ,EAAeM,KAAKF,QAJpBH,EAAYK,KAAKF,KAUrB,IAAMG,cACJ,WAAYjB,EAAOkB,cACjBC,YAAMnB,EAAOkB,GACbxB,IAAME,EAAQsB,EAAQtB,MACtBG,KAAKqB,MAAQxB,EAAMyB,OAAOV,GAC1BZ,KAAKuB,YAAc1B,EAAM2B,qBACvBZ,EACAZ,KAAKyB,SAASC,KAAK1B,OAErBA,KAAKW,kBACLA,EAAeG,iBAAQa,GACrB3B,EAAKW,eAAegB,qEAClB,OAAI9B,EAAM+B,OACD/B,EAAM+B,OAAOD,EAAMlB,GAErBZ,EAAM8B,SAAM9B,EAAGY,sGAK5BoB,gCACE7B,KAAKuB,2BAGPrB,kBACE,OAAO4B,gBACLtB,EACAuB,OAAOC,UAAWhC,KAAKC,MAAOD,KAAKqB,MAAOrB,KAAKW,qBA3B/BL,aAiCtB,OAFAY,EAAQe,aAAerC,EACvBsB,EAAQgB,YAAc5B,YAAU4B,aAAe5B,YAAUqB,KAClDT"}